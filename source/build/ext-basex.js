/*!
 * ext-basex/$JIT Adapter Extensions for ExtJS Library 2.0+ and Ext Core 3.0+
 * Copyright(c) 2008-2009 Active Group, Inc.
 * licensing@theactivegroup.com
 * http://licensing.theactivegroup.com
 */
/*
 * ext-basex/$JIT Adapter Extensions for ExtJS Library 2.0+ and Ext Core 3.0+
 * Copyright(c) 2008-2009 Active Group, Inc.
 * licensing@theactivegroup.com
 * http://licensing.theactivegroup.com
 */
(function(){var d=Ext.lib.Ajax,g=function(k){return typeof k!="undefined"},h=Ext.emptyFn||function(){},a=Object.prototype;Ext.lib.Ajax.Queue=function(k){k=k?(k.name?k:{name:k}):{};Ext.apply(this,k,{name:"q-default",priority:5,FIFO:true,callback:null,scope:null,suspended:false,progressive:false});this.requests=new Array();this.pending=false;this.priority=this.priority>9?9:(this.priority<0?0:this.priority)};Ext.extend(Ext.lib.Ajax.Queue,Object,{add:function(k){var l=d.events?d.fireEvent("beforequeue",this,k):true;if(l!==false){this.requests.push(k);this.pending=true;d.pendingRequests++;this.manager&&this.manager.start()}},suspended:false,activeRequest:null,next:function(k){var l=k?this.requests[this.FIFO?"first":"last"]():this.requests[this.FIFO?"shift":"pop"]();if(this.requests.length==0){this.pending=false;Ext.isFunction(this.callback)&&this.callback.call(this.scope||null,this);d.events&&d.fireEvent("queueempty",this)}return l||null},clear:function(){this.suspend();d.pendingRequests-=this.requests.length;this.requests.length=0;this.pending=false;this.resume();this.next()},suspend:function(){this.suspended=true},resume:function(){this.suspended=false},requestNext:function(k){var l;this.activeRequest=null;if(!this.suspended&&(l=this.next(k))){if(l.active){this.activeRequest=d.request.apply(d,l);d.pendingRequests--}else{return this.requestNext(k)}}return this.activeRequest}});Ext.lib.Ajax.QueueManager=function(k){Ext.apply(this,k||{},{quantas:10,priorityQueues:new Array(new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array()),queues:{}})};Ext.extend(Ext.lib.Ajax.QueueManager,Object,{quantas:10,getQueue:function(k){return this.queues[k]},createQueue:function(k){if(!k){return null}var l=new d.Queue(k);l.manager=this;this.queues[l.name]=l;var m=this.priorityQueues[l.priority];m&&m.indexOf(l.name)==-1&&m.push(l.name);return l},removeQueue:function(k){if(k&&(k=this.getQueue(k.name||k))){k.clear();this.priorityQueues[k.priority].remove(k.name);delete this.queues[k.name]}},start:function(){if(!this.started){this.started=true;this.dispatch()}return this},suspendAll:function(){forEach(this.queues,function(k){k.suspend()})},resumeAll:function(){forEach(this.queues,function(k){k.resume()});this.start()},progressive:false,stop:function(){this.started=false;return this},dispatch:function(){var n=this,m=n.queues;var k=(d.activeRequests>=d.maxConcurrentRequests);while(d.pendingRequests&&!k){var l=function(r){var p=m[r],o;while(p&&!p.suspended&&p.pending&&p.requestNext()){k||(k=d.activeRequests>=d.maxConcurrentRequests);if(k){break}if(p.progressive||n.progressive){break}}if(k){return false}};forEach(this.priorityQueues,function(o){!!o.length&&forEach(o,l,this);k||(k=d.activeRequests>=d.maxConcurrentRequests);if(k){return false}},this)}if(d.pendingRequests||k){this.dispatch.defer(this.quantas,this)}else{this.stop()}}});Ext.apply(d,{headers:d.headers||{},defaultPostHeader:d.defaultPostHeader||"application/x-www-form-urlencoded; charset=UTF-8",defaultHeaders:d.defaultHeaders||{},useDefaultXhrHeader:!!d.useDefaultXhrHeader,defaultXhrHeader:"Ext.basex",conn:d.conn||{},SCRIPTTAG_POOL:[],_domRefs:[],onUnload:function(){delete d._domRefs;delete d.SCRIPTTAG_POOL},monitoredNode:function(u,o,s,k,t){var l=null,r=(k||window).document,q=r?r.getElementsByTagName("head")[0]:null;if(u&&r&&q){l=u.toUpperCase()=="SCRIPT"&&!!d.SCRIPTTAG_POOL.length?Ext.get(d.SCRIPTTAG_POOL.pop()):null;if(l){l.removeAllListeners()}else{l=Ext.get(r.createElement(u))}var p=Ext.getDom(l),n=Ext.capabilities.isEventSupported;p&&forEach(o||{},function(w,v){w&&(v in p)&&p.setAttribute(v,w)});if(s&&(s.immediate||u.toUpperCase()=="SCRIPT")){var m=(s.success||s).createDelegate(s.scope||null,[s||{}],0);if(s.immediate){m()}else{if(n("load",u)){l.on("load",m)}else{if(n("readystatechange",u)){l.on("readystatechange",function(){this.dom.readyState=="loaded"&&m()})}}}}t||p.parentNode||q.appendChild(p)}d._domRefs.push(l);return l},poll:{},pollInterval:d.pollInterval||50,queueManager:new d.QueueManager(),queueAll:false,activeRequests:0,pendingRequests:0,maxConcurrentRequests:(function(){var k=6;if(Ext.isIE){k=Ext.value(window.maxConnectionsPerServer,2)}else{if(Ext.isOpera){k=4}else{if(Ext.Safari){k=Ext.isSafari4?5:4}}}return k})(),forceActiveX:false,async:true,createXhrObject:function(s,t){var p={status:{isError:false},tId:s},o=null;t||(t={});try{t.xdomain&&window.XDomainRequest&&(p.conn=new XDomainRequest());if(!g(p.conn)&&Ext.capabilities.hasActiveX&&!!Ext.value(t.forceActiveX,this.forceActiveX)){throw ("IE7forceActiveX")}p.conn||(p.conn=new XMLHttpRequest())}catch(m){var k=Ext.capabilities.hasActiveX?(t.multiPart?this.activeXMultipart:this.activeX):null;if(k){for(var q=0,n=k.length;q<n;++q){try{p.conn=new ActiveXObject(k[q]);break}catch(r){o=(m=="IE7forceActiveX"?r:m)}}}}finally{p.status.isError=!g(p.conn);p.status.error=o}return p},createExceptionObject:function(o,n,l,k,m){return{tId:o,status:l?-1:0,statusText:l?"transaction aborted":"communication failure",isAbort:l,isTimeout:k,argument:n}},encoder:encodeURIComponent,serializeForm:function(){var n=/select-(one|multiple)/i,k=/file|undefined|reset|button/i,l=/radio|checkbox/i,m=/submit/i;return function(p){var q=p.elements||(document.forms[p]||Ext.getDom(p)).elements,w=false,v=this.encoder,t,x,o,r,s="",u;forEach(q,function(y){o=y.name;u=y.type;if(!y.disabled&&o){if(n.test(u)){forEach(y.options,function(z){if(z.selected){s+=String.format("{0}={1}&",v(o),v(z.hasAttribute&&z.hasAttribute("value")&&z.getAttribute("value")!==null?z.value:z.text))}})}else{if(!k.test(u)){if(!(l.test(u)&&!y.checked)&&!(u=="submit"&&w)){s+=v(o)+"="+v(y.value)+"&";w=m.test(u)}}}}});return s.substr(0,s.length-1)}}(),getHttpStatus:function(m,l,k){var o={status:0,statusText:"",isError:false,isLocal:false,isOK:true,error:null,isAbort:!!l,isTimeout:!!k};try{if(!m||!("status" in m)){throw ("noobj")}o.status=m.status;o.readyState=m.readyState;o.isLocal=(!m.status&&location.protocol=="file:")||(Ext.isSafari&&!g(m.status));o.isOK=(o.isLocal||(o.status==304||o.status==1223||(o.status>199&&o.status<300)));o.statusText=m.statusText||""}catch(n){}return o},handleTransactionResponse:function(p,q,m,l){q=q||{};var n=null;if(!p.status.isError){p.status=this.getHttpStatus(p.conn,m,l);n=this.createResponseObject(p,q.argument,m,l)}p.isPart||this.releaseObject(p);p.status.isError&&(n=Ext.apply({},n||{},this.createExceptionObject(p.tId,q.argument,!!m,!!l,p.status.error)));n.options=p.options;n.fullStatus=p.status;if(!this.events||this.fireEvent("status:"+p.status.status,p.status.status,p,n,q,m)!==false){if(p.status.isOK&&!p.status.isError){if(!this.events||this.fireEvent("response",p,n,q,m,l)!==false){var k=p.isPart?"onpart":"success";Ext.isFunction(q[k])&&q[k].call(q.scope||null,n)}}else{if(!this.events||this.fireEvent("exception",p,n,q,m,l,n.fullStatus.error)!==false){Ext.isFunction(q.failure)&&q.failure.call(q.scope||null,n,n.fullStatus.error)}}}return n},releaseObject:function(k){k&&(k.conn=null);if(k&&Ext.value(k.tId,-1)+1){this.activeRequests--;if(this.poll[k.tId]){window.clearInterval(this.poll[k.tId]);delete this.poll[k.tId]}if(this.timeout[k.tId]){window.clearInterval(this.timeout[k.tId]);delete this.timeout[k.tId]}delete this.conn[k.tId]}},decodeJSON:Ext.decode,reCtypeJSON:/(application|text)\/json/i,reCtypeXML:/(application|text)\/xml/i,createResponseObject:function(x,z,n,p){var B="content-type",q={responseXML:null,responseText:"",responseStream:null,responseJSON:null,contentType:null,getResponseHeader:h,getAllResponseHeaders:h};var l={},m="";if(n!==true){try{q.responseJSON=x.conn.responseJSON||null;q.responseStream=x.conn.responseStream||null;q.contentType=x.conn.contentType||null;q.responseText=x.conn.responseText}catch(C){x.status.isError=true;x.status.error=C}try{q.responseXML=x.conn.responseXML||null}catch(A){}try{m=("getAllResponseHeaders" in x.conn?x.conn.getAllResponseHeaders():null)||"";var t;m.split("\n").forEach(function(o){(t=o.split(":"))&&t.first()&&(l[t.first().trim().toLowerCase()]=(t.last()||"").trim())})}catch(y){x.status.isError=true;x.status.error=y}finally{q.contentType=q.contentType||l[B]||""}if((x.status.isLocal||x.proxied)&&typeof q.responseText=="string"){x.status.isOK=!x.status.isError&&((x.status.status=(!!q.responseText.length)?200:404)==200);if(x.status.isOK&&((!q.responseXML&&(x.options.isXML||this.reCtypeXML.test(q.contentType)))||(q.responseXML&&q.responseXML.childNodes.length===0))){var D=null;try{if(Ext.capabilities.hasActiveX){D=new ActiveXObject("MSXML2.DOMDocument.3.0");D.async=false;D.loadXML(q.responseText)}else{var u=null;try{u=new DOMParser();D=u.parseFromString(q.responseText,"application/xml")}catch(k){}finally{u=null}}}catch(w){x.status.isError=true;x.status.error=w}q.responseXML=D}if(q.responseXML){var v=(q.responseXML.documentElement&&q.responseXML.documentElement.nodeName=="parsererror")||(q.responseXML.parseError||0)!==0||q.responseXML.childNodes.length===0;v||(q.contentType=l[B]=q.responseXML.contentType||"text/xml")}}if(x.options.isJSON||(this.reCtypeJSON&&this.reCtypeJSON.test(l[B]||""))){try{Ext.isObject(q.responseJSON)||Ext.isArray(q.responseJSON)||(q.responseJSON=Ext.isFunction(this.decodeJSON)&&Ext.isString(q.responseText)?this.decodeJSON(q.responseText):null)}catch(r){x.status.isError=true;x.status.error=r}}}x.status.proxied=!!x.proxied;Ext.apply(q,{tId:x.tId,status:x.status.status,statusText:x.status.statusText,contentType:q.contentType||l[B],getResponseHeader:function(o){return l[(o||"").trim().toLowerCase()]},getAllResponseHeaders:function(){return m},fullStatus:x.status,isPart:x.isPart||false});x.parts&&!x.isPart&&(q.parts=x.parts);g(z)&&(q.argument=z);return q},setDefaultPostHeader:function(k){this.defaultPostHeader=k||""},setDefaultXhrHeader:function(k){this.useDefaultXhrHeader=k||false},request:function(k,m,o,r,x){var u=x=Ext.apply({async:this.async||false,headers:false,userId:null,password:null,xmlData:null,jsonData:null,queue:null,proxied:false,multiPart:false,xdomain:false},x||{});var t;if(o.argument&&o.argument.options&&o.argument.options.request&&(t=o.argument.options.request.arg)){Ext.apply(u,{async:u.async||t.async,proxied:u.proxied||t.proxied,multiPart:u.multiPart||t.multiPart,xdomain:u.xdomain||t.xdomain,queue:u.queue||t.queue,onPart:u.onPart||t.onPart})}if(!this.events||this.fireEvent("request",k,m,o,r,u)!==false){if(!u.queued&&(u.queue||(u.queue=this.queueAll||null))){u.queue===true&&(u.queue={name:"q-default"});var s=u.queue;var n=s.name||s,w=this.queueManager;var l=w.getQueue(n)||w.createQueue(s);u.queue=l;u.queued=true;var v=[k,m,o,r,u];v.active=true;l.add(v);return{tId:this.transactionId++,queued:true,request:v,options:u}}x.onpart&&(o.onpart||(o.onpart=Ext.isFunction(x.onpart)?x.onpart.createDelegate(x.scope):null));u.headers&&forEach(u.headers,function(y,q){this.initHeader(q,y,false)},this);var p;if(p=(this.headers?this.headers["Content-Type"]||null:null)){delete this.headers["Content-Type"]}if(u.xmlData){p||(p="text/xml");k="POST";r=u.xmlData}else{if(u.jsonData){p||(p="application/json; charset=utf-8");k="POST";r=(Ext.isArray(u.jsonData)||Ext.isObject(u.jsonData))?Ext.encode(u.jsonData):u.jsonData}}if(r){p||(p=this.useDefaultHeader?this.defaultPostHeader:null);p&&this.initHeader("Content-Type",p,false)}return this.makeRequest(u.method||k,m,o,r,u)}return null},getConnectionObject:function(m,k,p){var q,n;var r=this.transactionId;k||(k={});try{if(n=k.proxied){q={tId:r,status:{isError:false},proxied:true,conn:{el:null,send:function(s){var t=(n.target||window).document,o=t.getElementsByTagName("head")[0];if(o&&this.el){o.appendChild(this.el.dom);this.readyState=2}},abort:function(){this.readyState=0;window[q.cbName]=undefined;Ext.isIE||delete window[q.cbName];var o=Ext.getDom(this.el);if(this.el){this.el.removeAllListeners();if(!q.debug){if(Ext.isIE){d.SCRIPTTAG_POOL.push(this.el)}else{this.el.remove();if(o){for(var s in o){delete o[s]}}}}}this.el=o=null},_headers:{},getAllResponseHeaders:function(){var o=[];forEach(this._headers,function(t,s){t&&o.push(s+": "+t)});return o.join("\n")},getResponseHeader:function(o){return this._headers[String(o).toLowerCase()]||""},onreadystatechange:null,onload:null,readyState:0,status:0,responseText:null,responseXML:null,responseJSON:null},debug:n.debug,params:Ext.isString(k.params)?Ext.urlDecode(k.params):k.params||{},cbName:n.callbackName||"basexCallback"+r,cbParam:n.callbackParam||null};window[q.cbName]=q.cb=function(o){o&&typeof(o)=="object"&&(this.responseJSON=o);this.responseText=o||null;this.status=!!o?200:404;this.abort();this.readyState=4;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange();Ext.isFunction(this.onload)&&this.onload()}.createDelegate(q.conn);q.conn.open=function(){if(q.cbParam){q.params[q.cbParam]=q.cbName}var o=Ext.urlEncode(Ext.apply(Ext.urlDecode(p)||{},q.params,m.indexOf("?")>-1?Ext.urlDecode(m.split("?").last()):false));q.uri=o?m.split("?").first()+"?"+o:m;this.el=d.monitoredNode(n.tag||"script",{type:n.contentType||"text/javascript",src:q.uri,charset:n.charset||k.charset||null},null,n.target,true);this._headers["content-type"]=this.el.dom.type;this.readyState=1;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange()};k.async=true}else{q=this.createXhrObject(r,k)}if(q){this.transactionId++}}catch(l){q&&(q.status.isError=!!(q.status.error=l))}finally{return q}},makeRequest:function(t,n,s,k,l){var q;if(q=this.getConnectionObject(n,l,k)){q.options=l;var m=q.conn;try{if(q.status.isError){throw q.status.error}d.activeRequests++;m.open(t.toUpperCase(),n,l.async,l.userId,l.password);("onreadystatechange" in m)&&(m.onreadystatechange=this.onStateChange.createDelegate(this,[q,s,"readystate"],0));("onload" in m)&&(m.onload=this.onStateChange.createDelegate(this,[q,s,"load",4],0));("onprogress" in m)&&(m.onprogress=this.onStateChange.createDelegate(this,[q,s,"progress"],0));if(!this.events||this.fireEvent("beforesend",q,t,n,s,k,l)!==false){if(s&&s.timeout){("timeout" in m)&&(m.timeout=s.timeout);("ontimeout" in m)&&(m.ontimeout=this.abort.createDelegate(this,[q,s,true],0));("ontimeout" in m)||(l.async&&(this.timeout[q.tId]=window.setInterval(function(){d.abort(q,s,true)},s.timeout)))}if(this.useDefaultXhrHeader&&!l.xdomain){this.defaultHeaders["X-Requested-With"]||this.initHeader("X-Requested-With",this.defaultXhrHeader,true)}this.setHeaders(q);this.conn[q.tId]=q;m.send(k||null)}else{this.releaseObject(q);return q}}catch(p){q.status.isError=true;q.status.error=p}if(q.status.isError){return Ext.apply(q,this.handleTransactionResponse(q,s))}l.async||this.onStateChange(q,s,"load");return q}},abort:function(l,m,k){if(l){l.status||(l.status={});Ext.apply(l.status,{isAbort:!!!k,isTimeout:!!k,isError:!!k||!!l.status.isError});if(l.queued&&l.request){l.request.active=l.queued=false;this.events&&this.fireEvent("abort",l,m);return true}else{if(this.isCallInProgress(l)){if(!this.events||this.fireEvent(k?"timeout":"abort",l,m)!==false){("abort" in l.conn)&&l.conn.abort();this.handleTransactionResponse(l,m,l.status.isAbort,l.status.isTimeout)}return true}}}return false},isCallInProgress:function(k){if(k&&k.conn){if("readyState" in k.conn&&{0:true,4:true}[k.conn.readyState]){return false}return true}return false},clearAuthenticationCache:function(k){try{if(Ext.isIE){document.execCommand("ClearAuthenticationCache")}else{var l;if(l=new XMLHttpRequest()){l.open("GET",k||"/@@",true,"logout","logout");l.send("");l.abort.defer(100,l)}}}catch(m){}},initHeader:function(k,l){(this.headers=this.headers||{})[k]=l},onStateChange:function(q,y,w){if(!q.conn||q.status.isTimeout||q.status.isError){return}var l=q.conn,u=("readyState" in l?l.readyState:0);if(w==="load"||u>2){var x;try{x=l.contentType||l.getResponseHeader("Content-Type")||""}catch(s){}if(x&&/multipart\//i.test(x)){var k=null,n=x.split('"')[1],v="--"+n;q.multiPart=true;try{k=l.responseText}catch(t){}var m=k?k.split(v):null;if(m){q.parts||(q.parts=[]);m.shift();m.pop();forEach(Array.slice(m,q.parts.length),function(o){var r=o.split("\n\n");var p=(r[0]?r[0]:"")+"\n";q.parts.push(this.handleTransactionResponse(Ext.apply(Ext.clone(q),{boundary:n,conn:{status:200,responseText:(r[1]||"").trim(),getAllResponseHeaders:function(){return p.split("\n").filter(function(z){return !!z}).join("\n")}},isPart:true}),y))},this)}}}(u===4||w==="load")&&d.handleTransactionResponse(q,y);this.events&&this.fireEvent.apply(this,["readystatechange"].concat(Array.slice(arguments,0)))},setHeaders:function(k){if(k.conn&&"setRequestHeader" in k.conn){this.defaultHeaders&&forEach(this.defaultHeaders,function(m,l){k.conn.setRequestHeader(l,m)});this.headers&&forEach(this.headers,function(m,l){k.conn.setRequestHeader(l,m)})}this.headers={};this.hasHeaders=false},resetDefaultHeaders:function(){delete this.defaultHeaders;this.defaultHeaders={};this.hasDefaultHeaders=false},activeXMultipart:["MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP"],activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]});if(Ext.util.Observable){Ext.apply(d,{events:{request:true,beforesend:true,response:true,exception:true,abort:true,timeout:true,readystatechange:true,beforequeue:true,queue:true,queueempty:true},onStatus:function(k,o,n,m){var l=Array.slice(arguments,1);k=new Array().concat(k||new Array());forEach(k,function(p){p=parseInt(p,10);if(!isNaN(p)){var q="status:"+p;this.events[q]||(this.events[q]=true);this.on.apply(this,[q].concat(l))}},this)},unStatus:function(k,o,n,m){var l=Array.slice(arguments,1);k=new Array().concat(k||new Array());forEach(k,function(p){p=parseInt(p,10);if(!isNaN(p)){var q="status:"+p;this.un.apply(this,[q].concat(l))}},this)}},new Ext.util.Observable());Ext.hasBasex=true}Ext.stopIteration={stopIter:true};Ext.applyIf(Array.prototype,{map:function(l,o){var k=this.length;if(typeof l!="function"){throw new TypeError()}var n=new Array(k);for(var m=0;m<k;++m){m in this&&(n[m]=l.call(o||this,this[m],m,this))}return n},some:function(n){var o=Ext.isFunction(n)?n:function(){};var m=0,k=this.length,p=false;while(m<k&&!(p=!!o(this[m++]))){}return p},every:function(n){var o=Ext.isFunction(n)?n:function(){};var m=0,k=this.length,p=true;while(m<k&&(p=!!o(this[m++]))){}return p},include:function(n,l){if(!l&&typeof this.indexOf=="function"){return this.indexOf(n)!=-1}var m=false;try{this.forEach(function(p,o){if(m=(l?(p.include?p.include(n,l):(p===n)):p===n)){throw Ext.stopIteration}})}catch(k){if(k!=Ext.stopIteration){throw k}}return m},filter:function(m,l){var k=new Array();m||(m=function(n){return n});this.forEach(function(o,n){m.call(l,o,n)&&k.push(o)});return k},compact:function(l){var k=new Array();this.forEach(function(m,n){(m===null||m===undefined)||!(n in this)||k.push(l&&Ext.isArray(m)?m.compact():m)},this);return k},flatten:function(){var k=new Array();this.forEach(function(l){Ext.isArray(l)?(k=k.concat(l)):k.push(l)},this);return k},indexOf:function(m){for(var l=0,k=this.length;l<k;++l){if(this[l]==m){return l}}return -1},lastIndexOf:function(l){var k=this.length-1;while(k>-1&&this[k]!=l){k--}return k},unique:function(l,m){var k=new Array();this.forEach(function(o,n){if(0==n||(l?k.last()!=o:!k.include(o,m))){k.push(o)}},this);return k},grep:function(o,n,m){var k=new Array();n||(n=function(p){return p});var l=m?n.createDelegate(m):n;if(typeof o=="string"){o=new RegExp(o)}o instanceof RegExp&&this.forEach(function(q,p){o.test(q)&&k.push(l(q,p))});return k},first:function(n){var m=0;if(n){var k=this.length;while(m<k&&!(m in this)){m++}}return this[m]},last:function(l){var k=this.length-1;if(l){while(k>0&&!(k in this)){k--}}return this[k]},clear:function(){this.length=0},atRandom:function(l){var k=Math.floor(Math.random()*this.length);return this[k]||l},clone:function(k){if(!k){return this.concat()}var m=this.length||0,l=new Array(m);while(m--){l[m]=Ext.clone(this[m],true)}return l},reduce:function(q,k){var m=this.length,n=0,o,p;if(!m){return k||null}o=k||this.first(true);this.forEach(function(s,r,l){p=s;o=q.apply(null,[o,p,r,l])});return o},forEach:function(l,k){Array.forEach(this,l,k)},reversed:function(){var l=this.length||0,k=[];while(l--){k.push(this[l])}return k}});window.forEach=function(l,o,m,k){m=m||l;if(l){if(typeof o!="function"){throw new TypeError()}var n=Object;if(l instanceof Function){n=Function}else{if(l.forEach instanceof Function){return l.forEach(o,m)}else{if(typeof l=="string"){n=String}else{if(Ext.isNumber(l.length)){n=Array}}}}return n.forEach(l,o,m,k)}};Ext.clone=function(l,k){if(l===null||l===undefined){return l}if(Ext.isFunction(l.clone)){return l.clone(k)}else{if(Ext.isFunction(l.cloneNode)){return l.cloneNode(k)}}var m={};forEach(l,function(o,n,p){m[n]=(o===p?m:k?Ext.clone(o,true):o)},l,k);return m};var i=Array.prototype.slice;var c=Array.prototype.filter;Ext.applyIf(Array,{slice:function(k){return i.apply(k,i.call(arguments,1))},filter:function(m,l){var k=m&&typeof m=="string"?m.split(""):[];return c.call(k,l)},forEach:function(p,o,n){if(typeof o!="function"){throw new TypeError()}for(var m=0,k=p.length>>>0;m<k;++m){(m in p)&&o.call(n||null,p[m],m,p)}}});Ext.applyIf(RegExp.prototype,{clone:function(){return new RegExp(this)}});Ext.applyIf(Date.prototype,{clone:function(k){return k?new Date(this.getTime()):this}});Ext.applyIf(Boolean.prototype,{clone:function(){return this===true}});Ext.applyIf(Number.prototype,{times:function(n,l){var m=parseInt(this,10)||0;for(var k=1;k<=m;){n.call(l,k++)}},forEach:function(){this.times.apply(this,arguments)},clone:function(){return(this)+0}});Ext.applyIf(String.prototype,{trim:function(){var k=/^\s+|\s+$/g;return function(){return this.replace(k,"")}}(),trimRight:function(){var k=/^|\s+$/g;return function(){return this.replace(k,"")}}(),trimLeft:function(){var k=/^\s+|$/g;return function(){return this.replace(k,"")}}(),clone:function(){return String(this)+""},forEach:function(l,k){String.forEach(this,l,k)}});var b=function(q,o){var p=typeof q=="function"?q:function(){};var n=p._ovl;if(!n){n={base:p};n[p.length||0]=p;p=function(){var s=arguments.callee._ovl;var l=s[arguments.length]||s.base;return l&&l!=arguments.callee?l.apply(this,arguments):undefined}}var r=[].concat(o);for(var m=0,k=r.length;m<k;++m){n[r[m].length]=r[m]}p._ovl=n;return p};var e={array:"[object Array]",object:"[object Object]",complex:/Object\]|Array\]/},j=/^(function|object)$/i;Ext.applyIf(Ext,{isHostMethod:function(k,m){var l=typeof k[m];return !!((j.test(l)&&k[m])||l=="unknown")},isHostObjectProperty:function(k,m){var l=typeof k[m];return !!((j.test(l)&&k[m]))},overload:b(b,[function(k){return b(null,k)},function(m,l,k){return m[l]=b(m[l],k)}]),isIterable:function(k){if(Ext.isArray(k)||k.callee){return true}if(/NodeList|HTMLCollection/.test(a.toString.call(k))){return true}return(typeof k.nextNode!="undefined"||k.item)&&Ext.isNumber(k.length)},isArray:function(k){return a.toString.apply(k)=="[object Array]"},isObject:function(k){return !!k&&a.toString.apply(k)=="[object Object]"},isComplex:function(k){return !!k&&e.complex.test(a.toString.apply(k))},isNumber:function(k){return typeof k=="number"&&isFinite(k)},isBoolean:function(k){return typeof k=="boolean"},isDocument:function(k){return a.toString.apply(k)=="[object HTMLDocument]"||(k&&k.nodeType===9)},isElement:function(k){if(k){var l=k.dom||k;return !!l.tagName||(/\[object html/i).test(a.toString.apply(l))}return false},isEvent:function(k){return a.toString.apply(k)=="[object Event]"||(Ext.isObject(k)&&!Ext.type(k.constructor)&&(window.event&&k.clientX&&k.clientX===window.event.clientX))},isFunction:function(k){return a.toString.apply(k)=="[object Function]"},isString:function(k){return typeof k=="string"},isPrimitive:function(k){return Ext.isString(k)||Ext.isNumber(k)||Ext.isBoolean(k)},isDefined:g});Ext.ns("Ext.capabilities");var f=Ext.capabilities;f.isEventSupported=function(){var m={select:"input",change:"input",submit:"form",reset:"form",load:"img",error:"img",abort:"img"};var k={},n=/^on/i,l=function(q,p){var o=Ext.getDom(p);return(o?(Ext.isElement(o)||Ext.isDocument(o)?o.nodeName.toLowerCase():p.self?"#window":p||"#object"):p||"div")+":"+q};return function(s,u){s=(s||"").replace(n,"");var t,r=false,p="on"+s,o=(u?u:m[s])||"div",q=l(s,o);if(q in k){return k[q]}t=Ext.isString(o)?document.createElement(o):u;r||(r=window.Event&&!!(String(s).toUpperCase() in window.Event));if(!r&&t&&Ext.isHostMethod(t,"setAttribute")){r=true;if(typeof t[p]=="undefined"){t.setAttribute(p,"return;");r=Ext.isHostMethod(t,p)}}k[q]=r;t=null;return r}}();Ext.onReady(function(){Ext.apply(f,{hasActiveX:g(window.ActiveXObject),hasXDR:function(){return g(window.XDomainRequest)||(g(window.XMLHttpRequest)&&"withCredentials" in new XMLHttpRequest())}(),hasChromeFrame:function(){try{if(g(window.ActiveXObject)&&!!(new ActiveXObject("ChromeTab.ChromeFrame"))){return true}}catch(k){}var l=navigator.userAgent.toLowerCase();return !!(l.indexOf("chromeframe")>=0||l.indexOf("x-clock")>=0)}(),hasFlash:(function(){if(g(window.ActiveXObject)){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return true}catch(n){}return false}else{if(navigator.plugins){for(var k=0,m=navigator.plugins,l=m.length;k<l;++k){if((/flash/i).test(m[k].name)){return true}}return false}}return false})(),hasCookies:Ext.isIE&&("dialogArguments" in window)?false:!!navigator.cookieEnabled,hasCanvas:!!document.createElement("canvas").getContext,hasCanvasText:function(){return !!(this.hasCanvas&&typeof document.createElement("canvas").getContext("2d").fillText=="function")}(),hasSVG:!!(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").width),hasXpath:!!document.evaluate,hasWorkers:g(window.Worker)||f.hasGears,hasOffline:g(window.applicationCache),hasLocalStorage:g(window.localStorage),hasGeoLocation:g(navigator.geolocation),hasBasex:true,hasAudio:function(){var m=!!document.createElement("audio").canPlayType,n=("Audio" in window&&window.Audio)?new Audio(""):{},o=m||("canPlayType" in n)?{tag:m,object:("play" in n),testMime:function(q){var r;return(r=n.canPlayType?n.canPlayType(q):"no")!=="no"&&r!==""}}:false,p,l,k={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/x-wav",basic:"audio/basic",aif:"audio/x-aiff"};if(o&&o.testMime){for(l in k){o[l]=o.testMime(k[l])}}return o}(),hasVideo:function(){var m=!!document.createElement("video").canPlayType,o=m?document.createElement("video"):{},n=("canPlayType" in o)?{tag:m,testCodec:function(q){var r;return(r=o.canPlayType?o.canPlayType(q):"no")!=="no"&&r!==""}}:false,p,k,l={mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',ogg:'video/ogg; codecs="theora, vorbis"'};if(n&&n.testCodec){for(k in l){n[k]=n.testCodec(l[k])}}return n}(),hasInputAutoFocus:function(){return("autofocus" in (document.createElement("input")))}(),hasInputPlaceHolder:function(){return("placeholder" in (document.createElement("input")))}(),hasInputType:function(l){var k=document.createElement("input");if(k){try{k.setAttribute("type",l)}catch(m){}return k.type!=="text"}return false}})});Ext.EventManager.on(window,"beforeunload",d.onUnload,d,{single:true})})();Ext.applyIf(Function.prototype,{forEach:function(a,e,d,c){if(a){var b;for(b in a){(!!c||a.hasOwnProperty(b))&&e.call(d||a,a[b],b,a)}}},createBuffered:function(a,c){var d=this,b=new Ext.util.DelayedTask();return function(){b.delay(a,d,c,Array.slice(arguments,0))}},createDelayed:function(c,d,b,a){var e=(d||b)?this.createDelegate(d,b,a):this;return c?function(){setTimeout(e,c)}:e},clone:function(a){return this}});